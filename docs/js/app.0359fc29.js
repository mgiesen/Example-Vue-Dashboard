(function(){"use strict";var t={8312:function(t,e,s){var n=s(5328),i=s(6760),o=s(8752);const r=t=>((0,i.ED)("data-v-a66825da"),t=t(),(0,i.ii)(),t),a={id:"header",class:"header fixed-top d-flex align-items-center"},c={class:"d-flex align-items-center justify-content-between"},l=r((()=>(0,i.QD)("img",{src:"logo/logo.png",alt:"Logo"},null,-1))),u=r((()=>(0,i.QD)("span",null,"Vue Dashboard",-1))),h={class:"sidebar-nav"},d=["onClick"],b=r((()=>(0,i.QD)("i",{class:"bi bi-chevron-down ms-auto"},null,-1))),f={class:"nav-content"},p=r((()=>(0,i.QD)("li",{class:"nav-heading"},"Divider",-1))),v=r((()=>(0,i.QD)("li",{class:"nav-item"},[(0,i.QD)("a",{href:"https://github.com/mgiesen/Example-Vue-Dashboard",class:"nav-link collapsed"},[(0,i.QD)("span",null,[(0,i.QD)("i",{class:"bi bi-github"}),(0,i.mY)(" GitHub Page ")])])],-1))),m={id:"main"},g=r((()=>(0,i.QD)("i",{class:"bi bi-arrow-up-short"},null,-1))),D=[g];function k(t,e,s,r,g,k){const W=(0,i.E1)("router-link"),w=(0,i.E1)("sidebar"),y=(0,i.E1)("router-view");return(0,i.Wz)(),(0,i.An)(i.ae,null,[(0,i.QD)("header",a,[(0,i.QD)("div",c,[(0,i.K2)(W,{to:"/",class:"logo d-flex align-items-center"},{default:(0,i.Ql)((()=>[l,u])),_:1})])]),(0,i.K2)(w,{id:"sidebar",class:"sidebar"},{default:(0,i.Ql)((()=>[(0,i.QD)("ul",h,[((0,i.Wz)(!0),(0,i.An)(i.ae,null,(0,i.mi)(g.navItems,((t,e)=>((0,i.Wz)(),(0,i.An)("li",{key:e,class:"nav-item"},[(0,i.QD)("a",{class:(0,o.WN)(["nav-link",{collapsed:!t.isExpanded}]),onClick:(0,n.Y7)((t=>k.toggleGroup(e)),["prevent"])},[(0,i.QD)("i",{class:(0,o.WN)(t.icon)},null,2),(0,i.QD)("span",null,(0,o.WA)(t.title),1),b],10,d),(0,i.wt)((0,i.QD)("ul",f,[((0,i.Wz)(!0),(0,i.An)(i.ae,null,(0,i.mi)(t.children,((t,e)=>((0,i.Wz)(),(0,i.An)("li",{key:`child-${e}`},[(0,i.K2)(W,{to:t.path,class:"d-flex align-items-center"},{default:(0,i.Ql)((()=>[(0,i.QD)("i",{class:(0,o.WN)(k.getIconClass(t.path))},null,2),(0,i.QD)("span",null,(0,o.WA)(t.title),1)])),_:2},1032,["to"])])))),128))],512),[[n.Ub,t.isExpanded]])])))),128)),p,v])])),_:1}),(0,i.QD)("main",m,[(0,i.K2)(y)]),(0,i.QD)("div",{class:"back-to-top d-flex align-items-center justify-content-center",onClick:e[0]||(e[0]=(...t)=>k.scrollToTop&&k.scrollToTop(...t)),tabindex:"0"},D)],64)}var W={name:"App",data(){return{expandedGroups:{},navItems:[{title:"Dashboard Group 1",icon:"bi bi-grid",children:[{title:"Dashboard 1",path:"/"},{title:"Dashboard 2",path:"/mydashboard2"}],isExpanded:!0}]}},mounted(){window.addEventListener("scroll",this.handleScroll),this.handleScroll()},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},methods:{toggleGroup(t){this.navItems[t].isExpanded=!this.navItems[t].isExpanded},getIconClass(t){return this.$route.path===t?"bi-circle-fill":"bi bi-circle"},handleScroll(){const t=document.querySelector(".back-to-top");window.scrollY>100?t.classList.add("active"):t.classList.remove("active")},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}},w=s(8152);const y=(0,w.c)(W,[["render",k],["__scopeId","data-v-a66825da"]]);var Q=y,x=s(5216);const S=(0,i.QD)("div",{style:{height:"1000px"}},null,-1);function E(t,e,s,n,o,r){const a=(0,i.E1)("ValueWidget");return(0,i.Wz)(),(0,i.An)("div",null,[(0,i.K2)(a,{title:"Temperatur I (REST)",fetchUrl:"http://localhost:3000/temperature",icon:"bi-thermometer-sun",iconColor:"#fff",iconBgColor:"#4e73df"}),(0,i.K2)(a,{title:"Temperatur II (Websocket)",icon:"bi-thermometer-snow",fetchUrl:"ws://localhost:3001",iconColor:"#fff",iconBgColor:"#1cc88a",id:"wss_temperature"}),S])}const A={class:"card info-card"},C={class:"card-body"},U={class:"card-title"},I={class:"d-flex align-items-center"},T={class:"ps-3"},z={key:0},O={key:1},_={key:2},V={key:3};function j(t,e,s,n,r,a){return(0,i.Wz)(),(0,i.An)("div",A,[(0,i.QD)("div",C,[(0,i.QD)("h5",U,(0,o.WA)(t.title),1),(0,i.QD)("div",I,[(0,i.QD)("div",{class:"card-icon rounded-circle d-flex align-items-center justify-content-center",style:(0,o.MN)({color:t.iconColor,backgroundColor:t.iconBgColor})},[(0,i.QD)("i",{class:(0,o.WN)(t.icon)},null,2)],4),(0,i.QD)("div",T,["connecting"===t.status?((0,i.Wz)(),(0,i.An)("h6",z,"Lade...")):"open"===t.status?((0,i.Wz)(),(0,i.An)("h6",O,"Warte auf Daten...")):"close"===t.status?((0,i.Wz)(),(0,i.An)("h6",_,"Keine Verbindung")):((0,i.Wz)(),(0,i.An)("h6",V,(0,o.WA)(t.value)+" "+(0,o.WA)(t.unit),1))])])])])}s(3248);class K{constructor(){this.sockets={},this.subscribers={},this.reconnectInterval=5e3}connect(t){this.sockets[t]||(this.sockets[t]=new WebSocket(t),this.subscribers[t]=[],this.sockets[t].onopen=()=>{this.notifySubscribers(t,{status:"open"})},this.sockets[t].onmessage=e=>{const s=JSON.parse(e.data);this.notifySubscribers(t,s)},this.sockets[t].onclose=()=>{this.notifySubscribers(t,{status:"close"}),delete this.sockets[t],setTimeout((()=>this.connect(t)),this.reconnectInterval)},this.sockets[t].onerror=()=>{this.notifySubscribers(t,{status:"error"}),this.sockets[t].close()})}subscribe(t,e){this.subscribers[t]||(this.subscribers[t]=[]),this.subscribers[t].push(e),this.sockets[t]&&this.sockets[t].readyState===WebSocket.OPEN&&e({type:"open"})}unsubscribe(t,e){this.subscribers[t]&&(this.subscribers[t]=this.subscribers[t].filter((t=>t!==e)))}notifySubscribers(t,e){this.subscribers[t]&&this.subscribers[t].forEach((t=>t(e)))}}const N=new K;var L=(0,i._M)({name:"ValueWidget",props:{title:String,icon:String,fetchUrl:String,iconColor:String,iconBgColor:String,id:String},data(){return{value:"",unit:"",status:"connecting"}},mounted(){this.fetchUrl.startsWith("ws")||this.fetchUrl.startsWith("wss")?this.connectWebSocket():(this.fetchUrl.startsWith("http")||this.fetchUrl.startsWith("https"))&&this.fetchData()},beforeUnmount(){(this.fetchUrl.startsWith("ws")||this.fetchUrl.startsWith("wss"))&&N.unsubscribe(this.fetchUrl,this.handleData)},methods:{async fetchData(){this.status="connecting";try{const t=await fetch(this.fetchUrl);if(!t.ok)throw new Error("Netzwerkantwort war nicht ok.");const e=await t.json();this.value=e.value,this.unit=e.unit,this.status="message"}catch(t){this.status="close"}},connectWebSocket(){N.connect(this.fetchUrl),N.subscribe(this.fetchUrl,this.handleData)},handleData(t){t.status?this.status=t.status:t.id===this.id&&(this.value=t.data.value,this.unit=t.data.unit,this.status="message")}}});const M=(0,w.c)(L,[["render",j],["__scopeId","data-v-e2c8015c"]]);var B=M,G={name:"MyDashboard1",components:{ValueWidget:B}};const P=(0,w.c)(G,[["render",E]]);var Y=P;function R(t,e,s,n,o,r){const a=(0,i.E1)("ValueWidget");return(0,i.Wz)(),(0,i.An)("div",null,[(0,i.K2)(a,{title:"Temperatur III (REST)",fetchUrl:"http://localhost:3000/temperature",icon:"bi-thermometer-sun",iconColor:"#fff",iconBgColor:"#4e73df"})])}var $={name:"MyDashboard2",components:{ValueWidget:B}};const q=(0,w.c)($,[["render",R]]);var F=q;const H=(0,x.gv)({history:(0,x.oz)("/Example-Vue-Dashboard/"),routes:[{path:"/",name:"MyDashboard1",component:Y},{path:"/mydashboard2",name:"MyDashboard2",component:F}]});var J=H;const X=(0,n.W0)(Q);X.use(J),X.mount("#app")}},e={};function s(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,s),o.exports}s.m=t,function(){var t=[];s.O=function(e,n,i,o){if(!n){var r=1/0;for(u=0;u<t.length;u++){n=t[u][0],i=t[u][1],o=t[u][2];for(var a=!0,c=0;c<n.length;c++)(!1&o||r>=o)&&Object.keys(s.O).every((function(t){return s.O[t](n[c])}))?n.splice(c--,1):(a=!1,o<r&&(r=o));if(a){t.splice(u--,1);var l=i();void 0!==l&&(e=l)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[n,i,o]}}(),function(){s.d=function(t,e){for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,n){var i,o,r=n[0],a=n[1],c=n[2],l=0;if(r.some((function(e){return 0!==t[e]}))){for(i in a)s.o(a,i)&&(s.m[i]=a[i]);if(c)var u=c(s)}for(e&&e(n);l<r.length;l++)o=r[l],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(u)},n=self["webpackChunkExample_Vue_Dashboard"]=self["webpackChunkExample_Vue_Dashboard"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=s.O(void 0,[999],(function(){return s(8312)}));n=s.O(n)})();
//# sourceMappingURL=app.0359fc29.js.map